data $str0 = { b 82, b 97, b 110, b 100, b 111, b 109, b 32, b 58, b 32, b 0 }
data $str1 = { b 10, b 0 }

data $seed = { w 2 }

export
function w $random() {
@start
    %t0 =w loadw $seed
    %t1 =w mul %t0, 1664525
    %t2 =w add %t1, 1013904223
    storew %t2, $seed
    %t3 =w loadw $seed
    %t4 =w loadw $seed
    ret %t4
}

export
function w $main() {
@start
    %r =w copy 0
    %t5 =w call $print_random()
    %t6 =w call $print_random()
    %t7 =w call $print_random()
    %t8 =w call $print_random()
    %t9 =w call $print_random()
    ret 0
}

export
function w $print_random() {
@start
    %r =w copy 0
    %t10 =w call $random()
    %r =w copy %t10
    %t11 =l copy $str0
    %t12 =w call $printf_str(l %t11)
    %t13 =w call $printf_int(w %r)
    %t14 =l copy $str1
    %t15 =w call $printf_str(l %t14)
    ret 0
}

function w $printf_int(w %value) {
@start
    %result =w call $printf(l $int_format, w %value)
    ret %result
}

function w $printf_str(l %str) {
@start
    %result =w call $printf(l %str)
    ret %result
}

data $int_format = { b 37, b 100, b 0 }  # "%d"
data $long_format = { b 37, b 108, b 100, b 0 }  # "%ld"
data $number_str = { b 78, b 85, b 77, b 0 }  # "NUM"
